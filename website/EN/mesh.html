<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2017-10-05 Thu 13:13 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>&lrm;</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Bob Mottram" />
<meta name="description" content="Turn the Beaglebone Black into a personal communications server"
 />
<meta name="keywords" content="freedombox, debian, beaglebone, red matrix, email, web server, home server, internet, censorship, surveillance, social network, irc, jabber" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="freedombone.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2017 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="preamble" class="status">
<a name="top" id="top"></a>
</div>
<div id="content">
<div class="org-center">

<div class="figure">
<p><img src="images/logo.png" alt="logo.png" />
</p>
</div>
</div>

<center><h1>Mesh Network</h1></center>

<div class="org-center">

<div class="figure">
<p><img src="images/mesh_screenshot.jpg" alt="mesh_screenshot.jpg" />
</p>
</div>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left"><a href="#orge7e03ce">What the system can do</a></td>
<td class="org-left">-</td>
<td class="org-left"><a href="#orgc3dbd7e">Disk Images</a></td>
<td class="org-left">-</td>
<td class="org-left"><a href="#orgf01fd55">Building Disk Images</a></td>
<td class="org-left">-</td>
<td class="org-left"><a href="#org1e57e4d">How to use it</a></td>
</tr>
</tbody>
</table>

<blockquote>
<p>
"<i>I see mesh networks naturally evolving to become the dominant form of network over the next few decades, because it’s the most practical solution to a number of problems that will have to be solved in order to build the VR web as well as to connect the entire world to the internet. Centralized networks are only possible in highly developed countries with existing infrastructures like power and telephone grids, as well as roads. You can’t build a tower where you don’t have either power or access. For vast areas of the world, mesh networks will be the only feasible solution.</i>" &#x2013; Valkyrie Ice
</p>
</blockquote>

<p>
The Freedombone Mesh is a wireless solution for autonomous or internet connected communication that can be rapidly deployed in temporary, emergency or post-disaster situations where internet access is unavailable or compromised.
</p>

<p>
Mesh networks are useful as a quick way to make a fully decentralised communications system which is not connected to or reliant upon the internet. Think festivals, hacker conferences, onboard ships at sea, disaster/war zones, small businesses who don't want the overhead of server maintenance, protests, remote areas of the world, temporary "digital blackouts", scientific expeditions and off-world space colonies.
</p>

<p>
If an internet connection is available then it can make use of that, but otherwise it can still work regardless of whether the internet exists. So it's not dependent upon ISPs and additional infrastructure other than USB drives isn't required.
</p>

<p>
Systems only need to be within wifi range of each other for the mesh to be created, so it can be an very convenient way to create a local communications network.
</p>

<p>
The Freedombone mesh roughly follows MondoNet's ten social specifications:
</p>

<ul class="org-ul">
<li><b>Decentralized</b>: The network should not be operated, maintained, or in any way reliant upon a single or minimally differentiated set of entities or technologies. No individual, entity or group should be central to the network to the extent that their absence would measurably impact its functionality or scope. Network participation should not require access to fixed, physical infrastructure of any sort.</li>
<li><b>Universally Accessible</b>: The requisite technology and expertise required to participate in the network should be available at minimal cost and effort to every human being on the planet. Furthermore, all users should be able to extend the network’s content and functionality to suit their own needs, or those of others. No aspect of the network’s functioning should be reliant upon proprietary technologies, information or capital.</li>
<li><b>Censor-proof</b>: The network should be resistant to both regulatory and technical attempts to limit the nature of the information shared, restrict usage by given individuals or communities, or render the network, or any portion of it, inoperable or inaccessible.</li>
<li><b>Surveillance-proof</b>: The network should enable users to choose exactly what information they share with whom, and to participate anonymously if they so desire. Users should only have access to information if they are the designated recipients, or if it has been published openly.</li>
<li><b>Secure</b>: The network should be organized in a way that minimizes the risk of malicious attacks or engineering failure. Information exchanged on the network should meet or exceed the delivery rate and reliability of information exchanged via the Internet.</li>
<li><b>Scalable</b>: The network should be organized with the expectation that its scale could reach or even exceed that of today’s Internet. Special care should be taken to address to the challenge of maintaining efficiency without the presence of a centralized backbone.</li>
<li><b>Permanent</b>: The network’s density and redundancy should be great enough that, despite its ad hoc nature, it will persistently operate on a broad scale, and be available in full to any user within range of another peer.</li>
<li><b>Fast (enough)</b>: The network should always achieve whatever speed is required for a “bottom line” level of social and cultural participation. At present, we assert that the network’s data transfer rate should, at a minimum, be enough for voice-over-IP (VoIP) communications, and low-bitrate streaming video.</li>
<li><b>Independent</b>: While the network will have the capacity to exchange information with Internet users and nodes, it should be able to operate independently, as well. A large-scale failure or closure of Internet infrastructure and content should have minimal effect on the network’s operations.</li>
<li><b>Evolvable</b>: The network should be built with future development in mind. The platform should be flexible enough to support technologies, protocols and modes of usage that have not yet been developed.</li>
</ul>

<div id="outline-container-orge7e03ce" class="outline-2">
<h2 id="orge7e03ce">What the system can do</h2>
<div class="outline-text-2" id="text-orge7e03ce">
<ul class="org-ul">
<li>Discovery of other users on the network</li>
<li>Text based chat, one-to-one and in groups</li>
<li>Voice chat (VoIP) and video calls</li>
<li>Private and public sharing of files</li>
<li>Blogging</li>
<li>Creating and broadcasting audio media/podcasts</li>
<li>Social network stream. Follow/unfollow other peers</li>
<li>No network administration required</li>
<li>No servers</li>
<li>Internet connection is optional</li>
<li>Works from bootable USB drives or microSD drives</li>
<li>Data is mesh routed between systems</li>
<li>Private communications is end-to-end secured and forward secret</li>
<li>Publicly shared data is <i>content addressable</i></li>
</ul>

<p>
This system should be quite scalable. Both qTox and IPFS are based upon distributed hash tables (DHT) so that each peer does not need to store the full index of data for the entire network. Gossiping between SSB peers may be slower, but the <a href="https://en.wikipedia.org/wiki/Small-world_network">small world effect</a> will presumably still make for quite efficient delivery in a large network. Caching or pinning of IPFS data and its content addressability means that if a file or blog becomes popular then performance should improve as the number of downloads increases, which is the opposite of the client/server paradigm.
</p>
</div>
</div>

<div id="outline-container-orgc3dbd7e" class="outline-2">
<h2 id="orgc3dbd7e">Disk Images</h2>
<div class="outline-text-2" id="text-orgc3dbd7e">
</div>
<div id="outline-container-org48cf6b4" class="outline-3">
<h3 id="org48cf6b4">Writing many images quickly</h3>
<div class="outline-text-3" id="text-org48cf6b4">
<p>
There may be situations where you need to write the same disk image to multiple drives at the same time in order to maximize rate of deployment. In the instructions given below the <b>dd</b> command is used for writing to the target drive, but to write to multiple drives you can use a tool such as <a href="https://wiki.gnome.org/Apps/MultiWriter">GNOME MultiWriter</a>.
</p>

<p>
For example on Arch/Parabola:
</p>

<div class="org-src-container">
<pre class="src src-bash">sudo pacman -S gnome-multi-writer
</pre>
</div>

<p>
Or on Debian based systems:
</p>

<div class="org-src-container">
<pre class="src src-bash">sudo apt-get install gnome-multi-writer
</pre>
</div>

<p>
The MultiWriter tool is also available within mesh client images, so that you can use mesh systems to create more copies of the same system.
</p>
</div>
</div>
<div id="outline-container-orga4d8a06" class="outline-3">
<h3 id="orga4d8a06">Client images</h3>
<div class="outline-text-3" id="text-orga4d8a06">
<div class="org-center">

<div class="figure">
<p><img src="images/mesh_netbook.jpg" alt="mesh_netbook.jpg" />
</p>
</div>
</div>

<p>
"Client" isn't exactly the right term, but it's a mesh peer with a user interface. These images can be copied to a USB drive, then you can plug it into a laptop/netbook/desktop machine and boot from it. You will probably also need an Atheros USB wifi dongle (the black protruding object on the left side of the netbook in the picture above), because most built-in wifi usually requires proprietary firmware. In the commands below substitute /dev/sdX with the USB drive device, excluding any trailing numbers (eg. /dev/sdb). The USB drive you're copying to will need to be at least 8GB in size.
</p>

<div class="org-src-container">
<pre class="src src-bash">sudo apt-get install xz-utils wget
wget https://freedombone.net/downloads/current/freedombone-meshclient-i386.img.xz
wget https://freedombone.net/downloads/current/freedombone-meshclient-i386.img.xz.sig
gpg --verify freedombone-meshclient-i386.img.xz.sig
sha256sum freedombone-meshclient-i386.img.xz
f7e261d369d6f0ccf650dbbed18227bfe5ec427ae0b97f56e1f1e202afc6d0b3
unxz freedombone-meshclient-i386.img.xz
sudo dd <span class="org-variable-name">if</span>=/dev/zero <span class="org-variable-name">of</span>=/dev/sdX <span class="org-variable-name">bs</span>=1M <span class="org-variable-name">count</span>=8
sudo dd <span class="org-variable-name">bs</span>=1M <span class="org-variable-name">if</span>=freedombone-meshclient-i386.img <span class="org-variable-name">of</span>=/dev/sdX <span class="org-variable-name">conv</span>=fdatasync
</pre>
</div>

<p>
To get a number of systems onto the mesh repeat the <i>dd</i> command to create however many bootable USB drives you need.
</p>

<p>
If you're in an emergency and don't have Atheros wifi dongles then there is also an "insecure" image which contains some proprietary wifi drivers which may work with a wider range of laptops. Proprietary drivers <b>are not recommended</b> because they're unsupportable and may be exploitable or contain malicious antifeatures which fundamentally compromise the security of the network. However, the trade-off between security/maintainability and simply having the ability to communicate at all may be a valid one in some situations.
</p>

<div class="org-src-container">
<pre class="src src-bash">sudo apt-get install xz-utils wget
wget https://freedombone.net/downloads/current/freedombone-meshclient-insecure-i386.img.xz
wget https://freedombone.net/downloads/current/freedombone-meshclient-insecure-i386.img.xz.sig
gpg --verify freedombone-meshclient-insecure-i386.img.xz.sig
sha256sum freedombone-meshclient-insecure-i386.img.xz
3bfbcaedb587c5cbddec8b9fffcd48398d9e3b97486ef49aa645357f61a0f11f
unxz freedombone-meshclient-insecure-i386.img.xz
sudo dd <span class="org-variable-name">if</span>=/dev/zero <span class="org-variable-name">of</span>=/dev/sdX <span class="org-variable-name">bs</span>=1M <span class="org-variable-name">count</span>=8
sudo dd <span class="org-variable-name">bs</span>=1M <span class="org-variable-name">if</span>=freedombone-meshclient-insecure-i386.img <span class="org-variable-name">of</span>=/dev/sdX <span class="org-variable-name">conv</span>=fdatasync
</pre>
</div>
</div>
</div>

<div id="outline-container-org990631a" class="outline-3">
<h3 id="org990631a">Router images</h3>
<div class="outline-text-3" id="text-org990631a">
<p>
Routers are intended to build network coverage for an area using small and low cost hardware. You can bolt them to walls or leave them on window ledges. They don't have any user interface and their only job is to haul network traffic across the mesh and to enable peers to find each other via running bootstrap nodes for Tox and IPFS. Copy the image to a microSD card and insert it into the router, plug in an Atheros wifi dongle and power on. That should be all you need to do.
</p>
</div>
<div id="outline-container-orgf4481d1" class="outline-4">
<h4 id="orgf4481d1">Beaglebone Black</h4>
<div class="outline-text-4" id="text-orgf4481d1">
<div class="org-center">

<div class="figure">
<p><img src="images/mesh_router.jpg" alt="mesh_router.jpg" />
</p>
</div>
</div>

<p>
The above picture shows a Beaglebone Black with the image copied onto a microSD card (there's no need to do anything with the internal EMMC). A USB Atheros wifi adaptor with a large antenna is attached and in this case power is from the mains, although it could be from a battery or solar power system capable of supplying 5 volts and maybe 1A (depending upon how active the router is).
</p>

<div class="org-src-container">
<pre class="src src-bash">sudo apt-get install xz-utils wget
wget https://freedombone.net/downloads/v3/freedombone-mesh-3_beaglebone-armhf.img.xz
wget https://freedombone.net/downloads/v3/freedombone-mesh-3_beaglebone-armhf.img.xz.sig
gpg --verify freedombone-mesh-3_beaglebone-armhf.img.xz.sig
sha256sum freedombone-mesh-3_beaglebone-armhf.img.xz
ab783ea807da1144bd076f7b43e54b5f4376ecf1ea1f86f56ac76c3469325802
unxz freedombone-mesh-3_beaglebone-armhf.img.xz
sudo dd <span class="org-variable-name">bs</span>=1M <span class="org-variable-name">if</span>=freedombone-mesh-3_beaglebone-armhf.img <span class="org-variable-name">of</span>=/dev/sdX <span class="org-variable-name">conv</span>=fdatasync
</pre>
</div>

<p>
If you have a few Beaglebone Blacks to use as routers then repeat the <i>dd</i> command to create however many microSD cards you need.
</p>

<p>
There is still a software freedom issue with the Beaglebone Black, but it doesn't prevent you from running a fully free system on the board. The TI AM335X SOC has a PowerVR SGX530 GPU which will only run with a proprietary blob, but this would only be an issue for systems with a monitor or LCD screen attached running a desktop environment which also needs GPU acceleration. For "headless" systems such as servers or mesh routers this isn't a problem.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-orgf01fd55" class="outline-2">
<h2 id="orgf01fd55">Building Disk Images</h2>
<div class="outline-text-2" id="text-orgf01fd55">
<p>
It's better not to trust images downloaded from random places on the interwebs. Chances are that unless you are in the web of trust of the above GPG signatures then they don't mean very much to you. If you actually want something trustworthy then build the images from scratch. It will take some time. Here's how to do it.
</p>

<p>
First you will need to create an image. On a Debian based system (tested on Debian Stretch):
</p>

<div class="org-src-container">
<pre class="src src-bash">sudo apt-get -y install git wget build-essential
wget https://freedombone.net/downloads/v3/freedombone-3.tar.gz
wget https://freedombone.net/downloads/freedombone-3.tar.gz.sig
gpg --verify freedombone-3.tar.gz.sig
sha256sum freedombone-3.tar.gz
b99853322871efd298a9efd78d22323e0e7424a5cdb5097b4cc55ef45a220ebb
tar -xzvf freedombone-3.tar.gz
<span class="org-builtin">cd</span> freedombone
git checkout stretch
sudo make install
freedombone-image --setup debian
freedombone-image -t i386 -v meshclient
</pre>
</div>

<p>
If you don't have Atheros or free software compatible wifi adapter then you can include proprietary wifi drivers which will work with most laptops. This is <b>NOT RECOMMENDED</b> because proprietary drivers are unsupportable and may contain either malware or be exploitable in a way which can't be fixed. However, if you're in an emergency and don't have any Atheros or free software wifi USB dongles then you can use the following command to make the image:
</p>

<div class="org-src-container">
<pre class="src src-bash">freedombone-image -t i386 -v meshclient --insecure yes
</pre>
</div>

<p>
This takes a while. Maybe an hour or so, depending on the speed of your system and the internets. The good news though is that once created you can use the resulting image any number of times, and you don't need to trust some pre-built image.
</p>

<p>
List what drives are on your system with:
</p>

<div class="org-src-container">
<pre class="src src-bash">ls /dev/sd*
</pre>
</div>

<p>
Now plug in the USB thumb drive, and do the same again. Notice which drive letter gets added.
</p>

<p>
You can now copy the image to the USB thumb drive, replacing <b>sdX</b> with the identifier of the USB thumb drive. Don't include any numbers (so for example use <b>sdc</b> instead of <b>sdc1</b>).
</p>

<div class="org-src-container">
<pre class="src src-bash">sudo dd <span class="org-variable-name">if</span>=/dev/zero <span class="org-variable-name">of</span>=/dev/sdX <span class="org-variable-name">bs</span>=1M <span class="org-variable-name">count</span>=8
sudo dd <span class="org-variable-name">bs</span>=1M <span class="org-variable-name">if</span>=myimagefile.img <span class="org-variable-name">of</span>=/dev/sdX <span class="org-variable-name">conv</span>=fdatasync
</pre>
</div>

<p>
And wait. Again it will take a while to copy over. When that's done plug it into the laptop or netbook which you want to use on the mesh, power on and set the BIOS to boot from the USB stick.
</p>

<p>
On first boot you'll be asked to set a username, and then you can open the chat client and select the <b>users</b> icon to show the Tox IDs for other users on the mesh. When folks join they will be announced.
</p>

<p>
Rinse, repeat, for any number of laptops that you want to get onto the mesh or to build out coverage within an area. There are no servers. Just peer-to-peer communications routed through the network which are end-to-end secure after a friend request is accepted. By default the chat client doesn't log anything.
</p>

<p>
You can also use single board computers (SBCs) such as the BeagleBone Black to make mesh routers which can be bolted to walls or the sides of buildings and consume minimal electrical power, so could be solar or battery powered for short term events such as festivals. To do that use the following command to make the image:
</p>

<div class="org-src-container">
<pre class="src src-bash">freedombone-image -t beaglebone -v mesh
</pre>
</div>

<p>
The resulting image can be copied to a microSD card, inserted into a Beaglebone Black and booted. Don't forget to plug in an Atheros USB wifi dongle.
</p>
</div>
</div>

<div id="outline-container-org410f58b" class="outline-2">
<h2 id="org410f58b">Customisation</h2>
<div class="outline-text-2" id="text-org410f58b">
<p>
If you want to make your own specially branded version, such as for a particular event, then to change the default desktop backgrounds edit the images within <b>img/backgrounds</b> and to change the available avatars and desktop icons edit the images within <b>img/avatars</b>. Re-create disk images using the instructions shown previously.
</p>

<p>
If you need particular <i>dconf</i> commands to alter desktop appearance or behavior then see the function <i>mesh_client_startup_applications</i> within <b>src/freedombone-image-customise</b>.
</p>
</div>
</div>
<div id="outline-container-org1e57e4d" class="outline-2">
<h2 id="org1e57e4d">How to use it</h2>
<div class="outline-text-2" id="text-org1e57e4d">
<p>
When you first boot from the USB drive the system will create some encryption keys, assign a unique network address to the system and then reboot itself. When that's done you should see a prompt asking for a username. This username just makes it easy for others to initially find you on the mesh and will appear in the list of users.
</p>

<p>
After a minute or two if you are within wifi range and there is at least one other user on the network then you should see additional icons appear on the desktop, such as <i>Other Users</i> and <i>Chat</i>.
</p>
</div>

<div id="outline-container-org11d6908" class="outline-3">
<h3 id="org11d6908">Boot trouble</h3>
<div class="outline-text-3" id="text-org11d6908">
<p>
If the system doesn't boot and reports an error which includes <b>/dev/mapper/loop0p1</b> then reboot with <b>Ctrl-Alt-Del</b> and when you see the grub menu press <b>e</b> and manually change <b>/dev/mapper/loop0p1</b> to <b>/dev/sdb1</b>, then press <b>Ctrl-x</b>. If that doesn't work then reboot and try <b>/dev/sdc1</b> instead.
</p>

<p>
After the system has booted successfully the problem should resolve itself on subsequent reboots.
</p>
</div>
</div>
<div id="outline-container-org17e82b1" class="outline-3">
<h3 id="org17e82b1">Set the Date</h3>
<div class="outline-text-3" id="text-org17e82b1">
<p>
On the ordinary internet the date and time of your system would be set automatically via NTP. But this is not the internet and so you will need to manually ensure that your date and time settings are correct. You might need to periodically do this if your clock drifts. It's not essential that the time on your system be highly accurate, but if it drifts too far or goes back to epoch then things could become a little confusing in regard to the order of blog posts.
</p>

<p>
<b>Right click on the date</b> in the top right corner of the screen. Select <b>preferences</b>, then click the <b>Time Settings</b> button. You can then select the date from the calendar and set the time, then click the <b>Set System Time</b> button. Enter the default password, which is <i>freedombone</i>.
</p>
</div>
</div>
<div id="outline-container-org55b78da" class="outline-3">
<h3 id="org55b78da">Check network status</h3>
<div class="outline-text-3" id="text-org55b78da">
<p>
Unlike with ordinary wifi, on the mesh you don't get a signal strength icon and so it's not simple to see if you have a good connection.
</p>

<p>
Select the wifi icon on the desktop and enter the password '<i>freedombone</i>'. The network configuration will go into a monitoring mode and in the bottom right side of the window you will be able to see signal strength and other parameters. This can help you to locate systems or adjust antennas to get the best wifi performance.
</p>


<div class="org-center">

<div class="figure">
<p><img src="images/mesh_signal.jpg" alt="mesh_signal.jpg" />
</p>
</div>
</div>

<p>
When you are finished close the window and then select the <i>Network Restart</i> desktop icon, which will restart the B.A.T.M.A.N. network. You can also use the restart icon if you are within range of the mesh network but the <i>Chat</i> and <i>Other Users</i> icons do not automatically appear after a few minutes.
</p>
</div>
</div>
<div id="outline-container-orgc3d9324" class="outline-3">
<h3 id="orgc3d9324">Connecting to the internet</h3>
<div class="outline-text-3" id="text-orgc3d9324">
<p>
If you need to be able to access the internet from the mesh then connect one of the peers to an internet router using an ethernet cable, then reboot it. Other peers in the mesh, including any attached mobile devices, will then be able to access the internet using the ethernet attached peer as a gateway. <a href="https://en.wikipedia.org/wiki/Freifunk">Freifunk</a> works in a similar way.
</p>

<p>
After connecting one peer to the internet you may need to reboot other peers in order to update their network configurations.
</p>
</div>
</div>
<div id="outline-container-orgdceba0f" class="outline-3">
<h3 id="orgdceba0f">Mobile devices (phones, etc)</h3>
<div class="outline-text-3" id="text-orgdceba0f">
<p>
To allow mobile devices to connect to the mesh you will need a second wifi adapter connected to your laptop/netbook/SBC. Plug in a second wifi adapter then reboot the system. The second adaptor will then create a wifi hotspot which mobile devices can connect to. The hotspot name also contains its local IP address (eg. "<i>mesh-192.168.1.83</i>").
</p>

<p>
On a typical Android device go to <b>Settings</b> then <b>Security</b> and ensure that <b>Unknown sources</b> is enabled. Also within <b>Wifi</b> from the <b>Settings</b> screen select the mesh hotspot. The password is "<i>freedombone</i>". Open a non-Tor browser and navigate to the IP address showing in the hotspot name. You can then download and install mesh apps.
</p>

<div class="org-center">

<div class="figure">
<p><img src="images/mesh_mobileapps.jpg" alt="mesh_mobileapps.jpg" />
</p>
</div>
</div>

<p>
On some android devices you may need to move the downloaded APK file from the <b>Downloads</b> directory to your <b>home</b> directory before you can install it.
</p>
</div>
</div>
<div id="outline-container-org6f1f090" class="outline-3">
<h3 id="org6f1f090">Chat System</h3>
<div class="outline-text-3" id="text-org6f1f090">
<p>
Ensure that you're within wifi range of at least one other mesh peer (could be a router or client) and then you should see that the <i>Chat</i> and <i>Other Users</i> icons appear. Select the users icon and you should see a list of users on the mesh. Select the <i>Chat</i> icon and once you are connected you should see the status light turn green. If after a few minutes you don't get the green status light then try closing and re-opening the Tox chat application. Select the plus button to add a friend and then copy and paste in a Tox ID from the users list.
</p>

<div class="org-center">

<div class="figure">
<p><img src="images/mesh_paste_tox_id.jpg" alt="mesh_paste_tox_id.jpg" />
</p>
</div>
</div>

<p>
The other user can then accept or decline your friend request.
</p>

<div class="org-center">

<div class="figure">
<p><img src="images/mesh_friend_request.jpg" alt="mesh_friend_request.jpg" />
</p>
</div>
</div>

<p>
You can also select an avatar by selecting the grey head and shoulders image.
</p>

<div class="org-center">

<div class="figure">
<p><img src="images/mesh_choose_avatar.jpg" alt="mesh_choose_avatar.jpg" />
</p>
</div>
</div>

<p>
And by selecting the user from the list on the left hand side the chat can begin.
</p>

<div class="org-center">

<div class="figure">
<p><img src="images/mesh_text_chat.jpg" alt="mesh_text_chat.jpg" />
</p>
</div>
</div>

<p>
One important point is that by default the microphone is turned off. When doing voice chat you can select the microphone volume with the drop down slider in the top right corner of the screen.
</p>

<p>
At present video doesn't work reliably, but text and voice chat do work well.
</p>
</div>
</div>

<div id="outline-container-org8ac8f7d" class="outline-3">
<h3 id="org8ac8f7d">Social Network</h3>
<div class="outline-text-3" id="text-org8ac8f7d">
<p>
Patchwork is available as a social networking system for the mesh. Like all social network systems it has a stream of posts and you can follow or unfollow other users. You can also send private messages to other users with end-to-end encryption.
</p>

<p>
Double click on the "Social" icon to open the app, then add your nickname and optionally a description. If you want to choose an avatar image some can be found within the directory <b>/usr/share/freedombone/avatars</b>. On older systems or systems without a hardware random number generator, Patchwork sometimes takes a long time (a few minutes) to open for the first time after clicking the icon. This is most likely due to the initial generation of encryption keys, so be patient.
</p>

<div class="org-center">

<div class="figure">
<p><img src="images/patchwork_setup.jpg" alt="patchwork_setup.jpg" />
</p>
</div>
</div>

<p>
Other Patchwork users on the mesh will appear automatically under the <b>local</b> list and you can select and follow them if you wish. It's also possible to select the dark theme from <b>settings</b> on the drop down menu if you prefer.
</p>

<div class="org-center">

<div class="figure">
<p><img src="images/patchwork_public.jpg" alt="patchwork_public.jpg" />
</p>
</div>
</div>

<p>
The Secure Scuttlebutt protocol which Patchwork is based upon is intended to be robust to intermittent network connectivity, so you can write posts when out of range and they will sync once you are back in the network.
</p>
</div>
</div>

<div id="outline-container-org25fbdb4" class="outline-3">
<h3 id="org25fbdb4">Sharing Files</h3>
<div class="outline-text-3" id="text-org25fbdb4">
<p>
You can make files publicly available on the network simply by dragging and dropping them into the <i>Public</i> folder on the desktop. To view the files belonging to another user select the desktop icon called <i>Visit a site</i> and enter the username or Tox ID of the other user.
</p>

<div class="org-center">

<div class="figure">
<p><img src="images/mesh_share_files.jpg" alt="mesh_share_files.jpg" />
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org00ad2c3" class="outline-3">
<h3 id="org00ad2c3">Blogging</h3>
<div class="outline-text-3" id="text-org00ad2c3">
<p>
To create a blog post select the <i>Blog</i> icon on the desktop and then use the up and down cursor keys, space bar and enter key to add a new entry. Edit the title of the entry and add your text. You can also include photos if you wish - just copy them to the <b>CreateBlog/content/images</b> directory and then link to them as shown.
</p>

<div class="org-center">

<div class="figure">
<p><img src="images/mesh_new_blog.jpg" alt="mesh_new_blog.jpg" />
</p>
</div>
</div>

<p>
To finish your blog entry just select <i>Save</i> and then close the editor. On older hardware it may take a while to publish the results, and this depends upon the amount of computation needed by IPFS to create file hashes. If you make no changes to the default text then the new blog entry will not be saved.
</p>

<div class="org-center">

<div class="figure">
<p><img src="images/mesh_new_blog2.jpg" alt="mesh_new_blog2.jpg" />
</p>
</div>
</div>

<div class="org-center">

<div class="figure">
<p><img src="images/mesh_view_blog.jpg" alt="mesh_view_blog.jpg" />
</p>
</div>
</div>

<p>
You can also visit other blogs, edit or delete your previous entry and also change your blog theme.
</p>


<div class="org-center">
<p>
This site can also be accessed via a Tor browser at <a href="http://pazyv7nkllp76hqr.onion">http://pazyv7nkllp76hqr.onion</a>
</p>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">

<style type="text/css">
.back-to-top {
    position: fixed;
    bottom: 2em;
    right: 0px;
    text-decoration: none;
    color: #000000;
    background-color: rgba(235, 235, 235, 0.80);
    font-size: 12px;
    padding: 1em;
    display: none;
}

.back-to-top:hover {
    background-color: rgba(135, 135, 135, 0.50);
}
</style>

<div class="back-to-top">
<a href="#top">Back to top</a> | <a href="mailto:bob@freedombone.net">E-mail me</a>
</div>
</div>
</body>
</html>
